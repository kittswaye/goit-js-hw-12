{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport default async function searchPicture(keyword, page=1, per_page=15) {\n    const API_KEY = '44204846-4ec433e2c1cc73895dee1a984';\n    const API_URL = 'https://pixabay.com/api/';\n\n    const response = await axios.get(API_URL, {\n        params: {\n            key: API_KEY,\n            q: keyword,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: per_page,\n            page: page\n        }\n    });\n\n    return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nexport function renderPictures(images) {\n    const htmlFragment = document.createDocumentFragment();\n    const gallery = document.querySelector('ul.gallery');\n\n    images.hits.forEach(el => {\n        htmlFragment.appendChild(createGalleryItem(el.webformatURL, el.largeImageURL, el.tags, el.likes, el.views, el.comments, el.downloads));\n    });\n\n    gallery.appendChild(htmlFragment);\n\n    var lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionDelay: 250,\n      captionsData: 'alt'\n    });\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('ul.gallery');\n    gallery.innerHTML = '';\n}\n\nfunction createGalleryItem(smallImg, largeImg, description, likes, views, comments, downloads) {\n    const liElement = document.createElement('li');\n    liElement.className = 'gallery-item';\n\n    const divUp = document.createElement('div');\n    divUp.className = 'gallery-div-up';\n\n    const aElement = document.createElement('a');\n    aElement.className = 'gallery-link';\n    aElement.href = largeImg;\n\n    const imgElement = document.createElement('img');\n    imgElement.className = 'gallery-image';\n    imgElement.src = smallImg;\n    imgElement.alt = description;\n    aElement.appendChild(imgElement);\n\n    divUp.appendChild(aElement);\n\n    const divBottom = document.createElement('div');\n    divBottom.className = 'gallery-likes';\n    divBottom.innerHTML = `\n    <ul>\n        <li>Likes<br><span class=\"counter\">${likes}</span></li>\n        <li>Views<br><span class=\"counter\">${views}</span></li>\n        <li>Comments<br><span class=\"counter\">${comments}</span></li>\n        <li>Downloads<br><span class=\"counter\">${downloads}</span></li>\n    </ul>\n    `;\n\n    liElement.appendChild(divUp);\n    liElement.appendChild(divBottom);\n\n    return liElement;\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport searchPicture from \"./js/pixabay-api\";\nimport { renderPictures, clearGallery } from \"./js/render-functions\";\n\n\nconst errorMessage = 'Sorry, there are no images matching your search query. Please try again!';\nlet page = 1;\nlet per_page = 15;\nlet searchQuery = '';\n\nfunction showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight'\n    });\n}\n\nfunction hideElement(id) {\n    document.getElementById(id).style.display = 'none';\n}\n\nfunction showElement(id) {\n    document.getElementById(id).style.display = 'block';\n}\n\ndocument.getElementById('search-form').addEventListener('submit', async (event) => {\n    event.preventDefault();\n    hideElement('loadmore');\n    searchQuery = document.getElementById('pixabay').value.trim();\n    page = 1;\n\n    if (searchQuery === '') {\n        showError(errorMessage);\n    } else {\n        showElement('loading');\n        clearGallery();\n        try {\n            const pictures = await searchPicture(searchQuery, page, per_page);\n            if (pictures.total !== 0) {\n                renderPictures(pictures);\n                showElement('loadmore');\n            } else {\n                showError(errorMessage);\n            }\n            hideElement('loading');\n        } catch (error) {\n            showError('Error')\n        }\n    }\n});\n\ndocument.getElementById('loadmore').addEventListener('click', async () => {\n    document.getElementById('loading').style.display = 'block';\n    page += 1;\n\n    function scroll() {\n        let card = document.querySelector(\".gallery-item\");\n        let rect = card.getBoundingClientRect();\n        window.scrollBy({ left: 0, top: rect.height * 3.5, behavior: \"smooth\" });\n    }\n\n    try {\n        const pictures = await searchPicture(searchQuery, page, per_page);\n        renderPictures(pictures);\n        scroll();\n        if (page * per_page >= pictures.totalHits) {\n            hideElement('loadmore');\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        }\n        hideElement('loading');\n    } catch (error) {\n        showError('Error')\n    }\n});\n"],"names":["searchPicture","keyword","page","per_page","API_KEY","API_URL","axios","renderPictures","images","htmlFragment","gallery","el","createGalleryItem","lightbox","SimpleLightbox","clearGallery","smallImg","largeImg","description","likes","views","comments","downloads","liElement","divUp","aElement","imgElement","divBottom","errorMessage","searchQuery","showError","message","iziToast","hideElement","id","showElement","event","pictures","scroll","rect"],"mappings":"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"}